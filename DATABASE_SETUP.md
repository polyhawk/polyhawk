# Supabase Setup for PolyHawk

## 1. Create Supabase Project
1.  Go to [Supabase](https://supabase.com).
2.  Click "New Project".
3.  Name it `poly-hawk`.
4.  Set a password and Region.
5.  Wait for it to setup.

## 2. Create Tables
Go to the **SQL Editor** in your Supabase dashboard and run the following script:

```sql
-- Subscriptions table for Whale Alerts
CREATE TABLE subscriptions (
  id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT timezone('utc'::text, now()) NOT NULL,
  email TEXT,
  telegram_chat_id TEXT,
  min_usd INTEGER DEFAULT 5000,
  active BOOLEAN DEFAULT TRUE
);

-- Enable Row Level Security (RLS)
ALTER TABLE subscriptions ENABLE ROW LEVEL SECURITY;

-- Allow anonymous inserts (so anyone can subscribe)
CREATE POLICY "Allow public inserts" ON subscriptions FOR INSERT WITH CHECK (true);
```

## 3. Connect to Project
1.  Go to **Project Settings** -> **API**.
2.  Copy **Project URL** and **anon public key**.
3.  Open your local `.env.local` file (create it if missing).
4.  Add the keys:

```bash
NEXT_PUBLIC_SUPABASE_URL=your_project_url
NEXT_PUBLIC_SUPABASE_ANON_KEY=your_anon_key
```

## 4. Restart Server
Restart your dev server (`npm run dev`) to load the new environment variables.
